 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/dexguard/index.html b/dexguard/index.html
index 8dfe8d57fde5e5417ae20b4278ec1566bb23244b..ca5c5ffca56f7a14b7830f35a5e37c5e921711ef 100644
--- a/dexguard/index.html
+++ b/dexguard/index.html
@@ -2875,52 +2875,53 @@ if(typeof DBG.metrics.lastClickAction==='undefined') DBG.metrics.lastClickAction
         if(tradesPendingGuardId && tradesPendingGuardId !== reqIds.trades) return;
         if(tradesPendingGuardKey && loadTrades && loadTrades._inFlightKey && tradesPendingGuardKey !== loadTrades._inFlightKey) return;
         tradesLastRenderAt = performance.now ? performance.now() : Date.now();
         const data = tradesPendingPayload;
         const doReset = tradesPendingReset;
         tradesPendingReset = false;
         try{
           const newly = renderTrades(data, {reset: doReset}) || [];
           if(typeof onRendered === 'function') onRendered(newly);
         }catch(e){
           // keep UI stable
         }
       }, delay);
     }
     // SPEEDFIX PATCH END
 
     // =========================================================
     //  $SOS DEX Terminal â€” from scratch
     //  Data sources:
     //   - Token discovery: DexScreener public API (search + token pairs)
     //   - OHLCV + trades: GeckoTerminal API (pools)
     //  No embeds. No third-party iframes.
     // =========================================================
 
     // -------------------- Constants
-    const GECKO = 'https://api.geckoterminal.com/api/v2';
-    const DS = 'https://api.dexscreener.com/latest/dex';
+    const API_BASE = (typeof location !== 'undefined' && location.origin) ? location.origin : '';
+    const GECKO = `${API_BASE}/api/gecko/api/v2`;
+    const DS = `${API_BASE}/api/ds/latest/dex`;
 
     const NET_LABEL = { solana:'SOL', eth:'ETH', bsc:'BNB', base:'BASE' };
     const NET_DS = { solana:'solana', eth:'ethereum', bsc:'bsc', base:'base' };
     const NET_GECKO = { solana:'solana', eth:'eth', bsc:'bsc', base:'base' };
 
     const DEFAULT_TOKEN = {
       solana: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v', // USDC
       eth:    '0xA0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',  // USDC
       bsc:    '0x8ac76a51cc950d9822d68b83fe1ad97b32cd580d',  // USDC
       base:   '0x833589fCD6eDb6E08f4c7C32D4f71b54bda02913'   // USDC
     };
 
     const DEFAULT_MARKET_TOKEN = {
       solana: 'So11111111111111111111111111111111111111112', // wSOL
       eth:    '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2',   // WETH
       bsc:    '0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c',   // WBNB
       base:   '0x4200000000000000000000000000000000000006'    // WETH on Base
     };
 
     // Prefer stable quote pools for chart correctness
     const STABLE_QUOTES = {
       solana: ['EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v'],
       eth: ['0xA0b86991c6218b36c1d19d4a2e9eb0ce3606eb48','0xdAC17F958D2ee523a2206206994597C13D831ec7'],
       bsc: ['0x8ac76a51cc950d9822d68b83fe1ad97b32cd580d','0x55d398326f99059fF775485246999027B3197955'],
       base:['0x833589fCD6eDb6E08f4c7C32D4f71b54bda02913']
@@ -7976,26 +7977,25 @@ if(searchScrim){
         // Seed lastAction from existing input, if any
         var q = document.getElementById("q");
         var v = q ? String(q.value||"").trim() : "";
         if(v && !DG_GUARD.lastAction){
           DG_GUARD.lastAction = { type:"token", input: v, opts: {silent:true, skipInput:true} };
         }
       }catch(_){}
       dgScheduleChecks("boot");
       // Periodic lightweight check (rare) to prevent blank screen persisting
       try{
         setInterval(function(){ dgRunGuardCheck("interval"); }, 12000);
       }catch(_){}
     }, {once:true});
 
     // Also check after navigation events that often imply token changes
     window.addEventListener("hashchange", function(){ dgScheduleChecks("hashchange"); }, {passive:true});
     window.addEventListener("popstate", function(){ dgScheduleChecks("popstate"); }, {passive:true});
   }catch(_){}
 })();
 </script>
     <pre id="dgDebugText"></pre>
   </div>
 
 </body>
 </html>
-
 
EOF
)
